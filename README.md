# plext_test
このリポジトリは，pLaTeX 拡張パッケージ plext.sty の挙動を改善する私案を置いたものです．
現在は，array, tabular 環境
~~や \parbox命令の垂直位置~~（追従できていません）について検討しています．

 * 現在の改善案 (plext-beta.sty) における表組・\parbox 命令の垂直位置
   * 周囲の組方向が横組かつ組方向が \<y>, \<z> 指定の場合
     * \[t] 指定のとき，一行目のベースラインが周囲のそれと一致（罫線は和文ベースラインの位置）
     * \[c] 指定のとき，中心が数式の軸を通る
     * \[b] 指定のとき，最終行のベースラインが周囲のそれと一致（罫線は和文ベースラインの位置）
   * 周囲の組方向が横組かつ組方向が \<t> 指定の場合
     * \[t] 指定のとき，表組の上端が周囲の欧文ベースラインと一致
     * \[c] 指定のとき，表組の中心が数式の軸を通る
     * \[b] 指定のとき，表組の下端が周囲の欧文ベースラインと一致
   * 周囲の組方向が縦組かつ組方向が \<y> 指定の場合
     * \[t] 指定のとき，表組の上端が周囲の和文ベースラインと一致
     * \[c] 指定のとき，中心が和文ベースラインを通る
     * \[b] 指定のとき，表組の下端が周囲の和文ベースラインと一致
   * 周囲の組方向が縦組かつ組方向が \<t> 指定の場合
     * \[t] 指定のとき，一行目のベースラインが周囲のそれと一致（罫線は和文ベースラインの位置）
     * \[c] 指定のとき，中心が和文ベースラインを通る
     * \[b] 指定のとき，最終行のベースラインが周囲のそれと一致（罫線は和文ベースラインの位置）
   * 周囲の組方向が縦組かつ組方向が \<z> 指定の場合
     * \[t] 指定のとき，罫線は欧文ベースラインの位置†
     * \[c] 指定のとき，中心が数式の軸を通る
     * \[b] 指定のとき，罫線は欧文ベースラインの位置†
     †: 先頭行/最終行は（欧文を基準にすると） `\ybaselineshift` だけ行送り方向にずれる
   * 周囲の組方向が縦数式ディレクションのとき
     和欧文のベースラインをずらす処理をまだ書いていないので詳細な検討はまだ

 * 論点
   * 周囲が縦数式ディレクションかつ組方向が \<t> 指定の場合，罫線の有無によって垂直位置がずれる．
     例えば \[t] 指定の場合，先頭が罫線だった場合に罫線を欧文ベースラインに揃えようとすれば，
     先頭行が罫線でなかった場合には欧文が `\tbaselineshift` だけずれる．
     
   * 周囲が縦組かつ組方向が \<z\> 指定の場合も欧文が `\ybaselineshift` だけずれる．

   どちらの問題も，pTeX が数式中に一律にベースライン補正をかける（結果的に，数式中の \hbox 中の欧文には二重にかかる）ことが
   背景にあると思われる．
